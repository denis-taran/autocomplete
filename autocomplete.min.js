!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).autocomplete=t()}(this,(function(){"use strict";
/**
     * Copyright (c) 2016 Denys Krasnoshchok
     *
     * Homepage: https://smartscheduling.com/en/documentation/autocomplete
     * Source: https://github.com/kraaden/autocomplete
     *
     * MIT License
     */return function(e){var t,n,i=document,r=e.container||i.createElement("div"),o=e.preventSubmit||0,a=-1!==["iPhone","iPad","iPod"].indexOf(navigator.platform||"");r.id=r.id||"autocomplete-"+y();var u,s,d=r.style,l=e.debounceWaitMs||0,c=e.disableAutoSelect||!1,f=r.parentElement,v=[],p="",m=2,g=e.showOnFocus,b=0,h=!1,w=!1,E=(null===(t=window.visualViewport)||void 0===t?void 0:t.height)||0,A=null;if(void 0!==e.minLength&&(m=e.minLength),!e.input)throw new Error("input undefined");var L=e.input;function y(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function x(){s&&window.clearTimeout(s)}function T(){return!!r.parentNode}function k(){var e;b++,v=[],p="",u=void 0,L.setAttribute("aria-activedescendant",""),L.setAttribute("aria-expanded","false"),(e=r.parentNode)&&e.removeChild(r)}function C(){r.innerHTML="",L.setAttribute("aria-activedescendant","");var t=function(e,t,n){var r=i.createElement("div");return r.textContent=e.label||"",r};e.render&&(t=e.render);var n=function(e,t){var n=i.createElement("div");return n.textContent=e,n};e.renderGroup&&(n=e.renderGroup);var o=i.createDocumentFragment(),a=y();if(v.forEach((function(i,s){if(i.group&&i.group!==a){a=i.group;var d=n(i.group,p);d&&(d.className+=" group",o.appendChild(d))}var l=t(i,p,s);l&&(l.id=r.id+"_"+s,l.setAttribute("role","option"),l.addEventListener("click",(function(t){w=!0;try{e.onSelect(i,L)}finally{w=!1}k(),t.preventDefault(),t.stopPropagation()})),i===u&&(l.className+=" selected",l.setAttribute("aria-selected","true"),L.setAttribute("aria-activedescendant",l.id)),o.appendChild(l))})),r.appendChild(o),v.length<1){if(!e.emptyMsg)return void k();var s=i.createElement("div");s.id=r.id+"_"+y(),s.className="empty",s.textContent=e.emptyMsg,r.appendChild(s),L.setAttribute("aria-activedescendant",s.id)}r.parentNode||(f||i.body).appendChild(r),function(){if(T()){L.setAttribute("aria-expanded","true"),d.height="auto",d.width=L.offsetWidth+"px";var t,n=0;o(),o(),e.customize&&t&&e.customize(L,t,r,n)}function o(){var e=i.documentElement,r=e.clientTop||i.body.clientTop||0,o=e.clientLeft||i.body.clientLeft||0,a=window.pageYOffset||e.scrollTop,u=window.pageXOffset||e.scrollLeft,s=(t=L.getBoundingClientRect()).top+L.offsetHeight+a-r,l=t.left+u-o;d.top=s+"px",d.left=l+"px",(n=window.innerHeight-(t.top+L.offsetHeight))<0&&(n=0),d.top=s+"px",d.bottom="",d.left=l+"px",d.maxHeight=n+"px"}}(),z()}function D(){T()&&C()}function N(){var e,t;a&&(((null===(e=window.visualViewport)||void 0===e?void 0:e.height)||0)>E&&A&&(clearTimeout(A),A=null),E=(null===(t=window.visualViewport)||void 0===t?void 0:t.height)||0)}function S(){D()}function O(e){e.target!==r?D():e.preventDefault()}function H(){w||_(0)}function z(){var e=r.getElementsByClassName("selected");if(e.length>0){var t=e[0],n=t.previousElementSibling;if(n&&-1!==n.className.indexOf("group")&&!n.previousElementSibling&&(t=n),t.offsetTop<r.scrollTop)r.scrollTop=t.offsetTop;else{var i=t.offsetTop+t.offsetHeight,o=r.scrollTop+r.offsetHeight;i>o&&(r.scrollTop+=i-o)}}}function P(e){v.length>0&&(!function(e){var t=i.getElementById(r.id+"_"+e);t&&(t.classList.remove("selected"),t.removeAttribute("aria-selected"),L.removeAttribute("aria-activedescendant"))}(e),function(e){var t=i.getElementById(r.id+"_"+e);t&&(t.classList.add("selected"),t.setAttribute("aria-selected","true"),L.setAttribute("aria-activedescendant",t.id))}(v.indexOf(u)),z())}function M(e,t){var n,i=T();if("Escape"===t)k();else{if(!i||v.length<1)return;"ArrowUp"===t?(n=v.indexOf(u),u=-1===n?void 0:v[(n+v.length-1)%v.length],P(n)):function(){var e=v.indexOf(u);u=v.length<1?void 0:-1===e?v[0]:v[(e+1)%v.length],P(e)}()}e.preventDefault(),i&&e.stopPropagation()}function V(t){var n=t.key;switch(n){case"ArrowUp":case"ArrowDown":case"Escape":M(t,n);break;case"Enter":!function(t){if(u){2===o&&t.preventDefault(),w=!0;try{e.onSelect(u,L)}finally{w=!1}k()}1===o&&t.preventDefault()}(t)}}function B(){g&&_(1)}function _(e){L.value.length>=m||1===e?(x(),s=window.setTimeout((function(){return F(L.value,e,L.selectionStart||0)}),0===e||2===e?l:0)):k()}function F(t,n,i){if(!h){var r=++b;e.fetch(t,(function(e){b===r&&e&&(p=t,u=(v=e).length<1||c?void 0:v[0],C())}),n,i)}}function G(t){e.keyup?e.keyup({event:t,fetch:function(){return _(0)}}):T()||"ArrowDown"!==t.key||_(0)}function I(t){e.click&&e.click({event:t,fetch:function(){return _(2)}})}function U(e){var t=a&&(e.relatedTarget===i.body||null===e.relatedTarget)?800:200;A=setTimeout((function(){i.activeElement!==L&&k(),A=null}),t)}return r.className="autocomplete "+(e.className||""),r.setAttribute("role","listbox"),L.setAttribute("role","combobox"),L.setAttribute("aria-expanded","false"),L.setAttribute("aria-autocomplete","list"),L.setAttribute("aria-controls",r.id),L.setAttribute("aria-owns",r.id),L.setAttribute("aria-activedescendant",""),L.setAttribute("aria-haspopup","listbox"),d.position="absolute",r.addEventListener("mousedown",(function(e){e.stopPropagation(),e.preventDefault()})),r.addEventListener("focus",(function(){return L.focus()})),L.addEventListener("keyup",G),L.addEventListener("click",I),L.addEventListener("keydown",V),L.addEventListener("input",H),L.addEventListener("blur",U),L.addEventListener("focus",B),window.addEventListener("resize",S),null===(n=window.visualViewport)||void 0===n||n.addEventListener("resize",N),i.addEventListener("scroll",O,!0),{destroy:function(){var e;L.removeEventListener("focus",B),L.removeEventListener("keyup",G),L.removeEventListener("click",I),L.removeEventListener("keydown",V),L.removeEventListener("input",H),L.removeEventListener("blur",U),window.removeEventListener("resize",S),null===(e=window.visualViewport)||void 0===e||e.removeEventListener("resize",N),i.removeEventListener("scroll",O,!0),L.removeAttribute("role"),L.removeAttribute("aria-expanded"),L.removeAttribute("aria-autocomplete"),L.removeAttribute("aria-controls"),L.removeAttribute("aria-activedescendant"),L.removeAttribute("aria-owns"),L.removeAttribute("aria-haspopup"),x(),k(),h=!0},fetch:function(){F(L.value,3,L.selectionStart||0)}}}}));
//# sourceMappingURL=autocomplete.min.js.map
