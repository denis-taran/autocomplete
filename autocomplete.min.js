!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).autocomplete=t()}(this,(function(){"use strict";
/**
     * Copyright (c) 2016 Denys Krasnoshchok
     *
     * Homepage: https://smartscheduling.com/en/documentation/autocomplete
     * Source: https://github.com/kraaden/autocomplete
     *
     * MIT License
     */return function(e){var t=document,n=e.container||t.createElement("div");n.id=n.id||"autocomplete-"+h();var i,r,o=n.style,a=e.debounceWaitMs||0,s=e.preventSubmit||!1,u=e.disableAutoSelect||!1,c=n.parentElement,d=[],l="",f=2,p=e.showOnFocus,v=0,m=!1,b=!1;if(void 0!==e.minLength&&(f=e.minLength),!e.input)throw new Error("input undefined");var g=e.input;function h(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function E(){r&&window.clearTimeout(r)}function A(){return!!n.parentNode}function w(){var e;v++,d=[],l="",i=void 0,g.setAttribute("aria-activedescendant",""),g.setAttribute("aria-expanded","false"),(e=n.parentNode)&&e.removeChild(n)}function y(){n.innerHTML="",g.setAttribute("aria-activedescendant","");var r=function(e,n,i){var r=t.createElement("div");return r.textContent=e.label||"",r};e.render&&(r=e.render);var a=function(e,n){var i=t.createElement("div");return i.textContent=e,i};e.renderGroup&&(a=e.renderGroup);var s=t.createDocumentFragment(),u=h();if(d.forEach((function(t,o){if(t.group&&t.group!==u){u=t.group;var c=a(t.group,l);c&&(c.className+=" group",s.appendChild(c))}var d=r(t,l,o);d&&(d.id=n.id+"_"+o,d.setAttribute("role","option"),d.addEventListener("click",(function(n){b=!0;try{e.onSelect(t,g)}finally{b=!1}w(),n.preventDefault(),n.stopPropagation()})),t===i&&(d.className+=" selected",d.setAttribute("aria-selected","true"),g.setAttribute("aria-activedescendant",d.id)),s.appendChild(d))})),n.appendChild(s),d.length<1){if(!e.emptyMsg)return void w();var f=t.createElement("div");f.id=n.id+"_"+h(),f.className="empty",f.textContent=e.emptyMsg,n.appendChild(f),g.setAttribute("aria-activedescendant",f.id)}n.parentNode||(c||t.body).appendChild(n),function(){if(A()){g.setAttribute("aria-expanded","true"),o.height="auto",o.width=g.offsetWidth+"px";var i,r=0;a(),a(),e.customize&&i&&e.customize(g,i,n,r)}function a(){var e=t.documentElement,n=e.clientTop||t.body.clientTop||0,a=e.clientLeft||t.body.clientLeft||0,s=window.pageYOffset||e.scrollTop,u=window.pageXOffset||e.scrollLeft,c=(i=g.getBoundingClientRect()).top+g.offsetHeight+s-n,d=i.left+u-a;o.top=c+"px",o.left=d+"px",(r=window.innerHeight-(i.top+g.offsetHeight))<0&&(r=0),o.top=c+"px",o.bottom="",o.left=d+"px",o.maxHeight=r+"px"}}(),C()}function L(){A()&&y()}function x(){L()}function T(e){e.target!==n?L():e.preventDefault()}function k(){b||O(0)}function C(){var e=n.getElementsByClassName("selected");if(e.length>0){var t=e[0],i=t.previousElementSibling;if(i&&-1!==i.className.indexOf("group")&&!i.previousElementSibling&&(t=i),t.offsetTop<n.scrollTop)n.scrollTop=t.offsetTop;else{var r=t.offsetTop+t.offsetHeight,o=n.scrollTop+n.offsetHeight;r>o&&(n.scrollTop+=r-o)}}}function N(e){e>-1&&d.length>0&&(!function(e){var i=t.getElementById(n.id+"_"+e);i&&(i.classList.remove("selected"),i.removeAttribute("aria-selected"),g.removeAttribute("aria-activedescendant"))}(e),function(e){var i=t.getElementById(n.id+"_"+e);i&&(i.classList.add("selected"),i.setAttribute("aria-selected","true"),g.setAttribute("aria-activedescendant",i.id))}(d.indexOf(i)),C())}function S(e,t){var n,r=A();if("Escape"===t)w();else{if(!r||d.length<1)return;"ArrowUp"===t?(n=d.indexOf(i),i=-1===n?void 0:d[(n+d.length-1)%d.length],N(n)):function(){var e=d.indexOf(i);i=d.length<1?void 0:-1===e?d[0]:d[(e+1)%d.length],N(e)}()}e.preventDefault(),r&&e.stopPropagation()}function D(t){var n=t.key;switch(n){case"ArrowUp":case"ArrowDown":case"Escape":S(t,n);break;case"Enter":!function(t){if(i){b=!0;try{e.onSelect(i,g)}finally{b=!1}w()}s&&t.preventDefault()}(t)}}function H(){p&&O(1)}function O(e){g.value.length>=f||1===e?(E(),r=window.setTimeout((function(){return M(g.value,e,g.selectionStart||0)}),0===e||2===e?a:0)):w()}function M(t,n,r){if(!m){var o=++v;e.fetch(t,(function(e){v===o&&e&&(l=t,i=(d=e).length<1||u?void 0:d[0],y())}),n,r)}}function z(t){e.keyup?e.keyup({event:t,fetch:function(){return O(0)}}):A()||"ArrowDown"!==t.key||O(0)}function B(t){e.click&&e.click({event:t,fetch:function(){return O(2)}})}function _(){setTimeout((function(){t.activeElement!==g&&w()}),200)}return n.className="autocomplete "+(e.className||""),n.setAttribute("role","listbox"),g.setAttribute("role","combobox"),g.setAttribute("aria-expanded","false"),g.setAttribute("aria-autocomplete","list"),g.setAttribute("aria-controls",n.id),g.setAttribute("aria-owns",n.id),g.setAttribute("aria-activedescendant",""),g.setAttribute("aria-haspopup","listbox"),o.position="absolute",n.addEventListener("mousedown",(function(e){e.stopPropagation(),e.preventDefault()})),n.addEventListener("focus",(function(){return g.focus()})),g.addEventListener("keyup",z),g.addEventListener("click",B),g.addEventListener("keydown",D),g.addEventListener("input",k),g.addEventListener("blur",_),g.addEventListener("focus",H),window.addEventListener("resize",x),t.addEventListener("scroll",T,!0),{destroy:function(){g.removeEventListener("focus",H),g.removeEventListener("keyup",z),g.removeEventListener("click",B),g.removeEventListener("keydown",D),g.removeEventListener("input",k),g.removeEventListener("blur",_),window.removeEventListener("resize",x),t.removeEventListener("scroll",T,!0),g.removeAttribute("role"),g.removeAttribute("aria-expanded"),g.removeAttribute("aria-autocomplete"),g.removeAttribute("aria-controls"),g.removeAttribute("aria-activedescendant"),g.removeAttribute("aria-owns"),g.removeAttribute("aria-haspopup"),E(),w(),m=!0},fetch:function(){M(g.value,3,g.selectionStart||0)}}}}));
//# sourceMappingURL=autocomplete.min.js.map
